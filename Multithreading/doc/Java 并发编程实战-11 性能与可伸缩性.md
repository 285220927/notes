# 性能与可伸缩性

应用程序的性能可以采用多个指标来衡量，例如服务时间、延迟时间、吞吐率、效率、可伸缩性以及容量等。其中一些指标（例如服务时间、等待时间）用于衡量程序的“运行速度”，即某个指定的任务单元需要“多快”才能处理完成。另一些指标（生产量、吞吐量）用于程序的“处理能力”，即在计算资源一定的情况下，能完成“多少”工作。

**可伸缩性指的是：当增加计算资源时（例如CPU、内存、存储容量或 I/O 带宽），程序的吞吐量或者处理能力能相应地增加**

# Amdahl 定律

在有些问题中，如果可用资源越多，那么问题的解决速度就越快。但是有些任务是串行的，所以一定会影响执行效率。

Amdahl 定律描述是：在增加计算资源的情况下，程序在理论上能够实现最高加速比，这个值取决于程序中可并行组件与串行组件所占的比重，。假定 F 是必须被串行执行的部分，那么根据 Amdahl 定律

Speedup <= 1/(F+(1-F)/N)

例如，串行化组件占 50%，那么最高加速比只能是 2.

# 上下文切换

如果可运行的线程数大于 CPU 的数量，那么操作系统最终会将某个正在运行的线程调度出来，从而使得其他线程能够使用 CPU。这将导致一次上下文切换，在这个过程中将保存当前运行线程的执行上下文，并将新调度进来的线程的执行上下文设置为当前上下文。——《Java 并发编程实战》

CPU通过时间片分配算法来循环执行任务，当前任务执行一个时间片后会切换到下一个任务。但是，在切换前会保存上一个任务的状态，以便下次切换回这个任务时，可以再加载这个任务的状态。所以任务从保存到再加载的过程就是一次上下文切换。——《Java 并发编程的艺术》

进程 ——《计算机操作系统原理》